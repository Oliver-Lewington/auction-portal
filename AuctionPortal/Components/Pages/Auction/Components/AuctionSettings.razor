@using AuctionPortal.Services
@using AuctionPortal.Data.Models
@using MudBlazor


@* Header *@
<MudStack Row AlignItems="AlignItems.Center" Spacing="2" Class="mb-6">
    <MudIcon Icon="@Icons.Material.Filled.Settings" Color="Color.Primary" Size="Size.Medium" />
    <MudText Typo="Typo.h6" Class="font-weight-bold">Auction Settings</MudText>
</MudStack> 

@if(Auction == null)
{
    <MudText Typo="Typo.body1" Color="Color.Error">Auction has not loaded successfully.</MudText>
    return;
}

<MudGrid Spacing="5" Justify="Justify.Center">
    @* General Settings Card *@
    <MudItem xs="12" lg="6">
        <MudPaper Class="pa-4 d-flex flex-column" Style="height: 100%;">
            <MudStack Spacing="3">
                <MudStack Row AlignItems="AlignItems.Center" Spacing="2">
                    <MudIcon Icon="@Icons.Material.Filled.Tune"/>
                    <MudText Typo="Typo.subtitle1">General Settings</MudText>
                </MudStack>

                @* Auction Status *@
                <MudSelect Label="Auction Status" Variant="Variant.Outlined" @bind-Value="_auctionStatus">
                    <MudSelectItem Value="@("Draft")"/>
                    <MudSelectItem Value="@("Live")"/>
                    <MudSelectItem Value="@("Paused")"/>
                    <MudSelectItem Value="@("Completed")"/>
                </MudSelect>

                @* Go Live Date/Time *@
                <MudTextField @bind-Value="Auction.StartTime" Variant="Variant.Outlined" Label="Start Time" InputType="InputType.DateTimeLocal" />
                        
                @* End Date/Time *@
                <MudTextField @bind-Value="Auction.EndTime" Variant="Variant.Outlined" Label="End Time" InputType="InputType.DateTimeLocal" />

            </MudStack>
        </MudPaper>
    </MudItem>

    @* Notification Settings Card *@
    <MudItem xs="12" lg="6">
        <MudPaper Class="pa-4 d-flex flex-column" Style="height: 100%;">
            <MudStack Spacing="3">
                <MudStack Row AlignItems="AlignItems.Center" Spacing="2">
                    <MudIcon Icon="@Icons.Material.Outlined.Notifications" Color="Color.Secondary" />
                    <MudText Typo="Typo.subtitle1">Notifications</MudText>
                </MudStack>

                <MudCheckBox T="bool" Dense="true" Size="Size.Small" Class="custom-checkbox-label" @bind-Checked="_notifyBidders">Notify bidders when auction starts</MudCheckBox>
                <MudCheckBox T="bool" Dense="true" Size="Size.Small"  @bind-Checked="_notifyWinners" Label="Notify winners when auction ends" />
                <MudCheckBox T="bool" Dense="true" Size="Size.Small" @bind-Checked="_notifyOutbid" Label="Notify bidders when outbid" />

                <MudStack Row AlignItems="AlignItems.Center" Spacing="2">
                    <MudIcon Icon="@Icons.Material.Outlined.Dangerous" Color="Color.Error" />
                    <MudText Typo="Typo.subtitle1">Permanent Actions</MudText>
                </MudStack>

                <MudGrid>
                    <MudItem xs="12" md="4">
                        <MudText Typo="Typo.subtitle1" Color="Color.Info">Create Product</MudText>
                        <MudButton Color="Color.Info" Variant="Variant.Outlined" StartIcon="@Icons.Material.Filled.Add" FullWidth="true" Class="mt-2" onclick="CreateProduct">Create</MudButton>
                    </MudItem>

                    <MudItem xs="12" md="4">
                        <MudText Typo="Typo.subtitle1" Color="Color.Warning">Cancel Auction</MudText>
                        <MudButton Color="Color.Warning" Variant="Variant.Outlined" Disabled="true" StartIcon="@Icons.Material.Outlined.Edit" FullWidth="true" Class="mt-2" onclick="EditAuction">Edit</MudButton>
                    </MudItem>

                    <MudItem xs="12" md="4">
                        <MudText Typo="Typo.subtitle1" Color="Color.Error">Edit Auction</MudText>
                        <MudButton Color="Color.Error" Variant="Variant.Outlined" StartIcon="@Icons.Material.Outlined.Delete" FullWidth="true" Class="mt-2" onclick="DeleteAuction">Delete</MudButton>
                    </MudItem>
                </MudGrid>
            </MudStack>
        </MudPaper>
    </MudItem>
</MudGrid>

@* Bottom Buttons *@
<MudStack Row Justify="Justify.FlexEnd" Spacing="2" Class="mt-6">
    <MudButton Variant="Variant.Outlined" Color="Color.Default">Discard Changes</MudButton>
    <MudButton Variant="Variant.Text" StartIcon="@Icons.Material.Filled.Save">Save Settings</MudButton>
</MudStack>

